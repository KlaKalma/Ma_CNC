# --- Load Kinematics ---
loadrt [KINS]KINEMATICS
loadrt [EMCMOT]EMCMOT servo_period_nsec=[EMCMOT]SERVO_PERIOD num_joints=1

# --- Load EtherCAT ---
loadusr -W lcec_conf LC10E_vendeur.xml
loadrt lcec

# --- Load CIA402 driver for 1 axis ---
loadrt cia402 count=1

# --- Utilities ---
loadrt mult2 count=1
loadrt near
loadrt dbounce

# --- Servo thread ---
addf mult2.0         servo-thread
addf dbounce.0       servo-thread
addf lcec.read-all   servo-thread
addf cia402.0.read-all servo-thread
addf motion-command-handler servo-thread
addf motion-controller      servo-thread
addf cia402.0.write-all    servo-thread
addf lcec.write-all         servo-thread

# --- Enable EMC ---
setp iocontrol.0.emc-enable-in 1
